<!doctype html><meta charset="utf-8">
<title>Hotlink Test &lsaquo; victorfarmafacil.com</title>
<style>
body{font-family:system-ui,Segoe UI,Roboto,Arial;padding:20px;max-width:900px;margin:auto}
.card{border:1px solid #e5e7eb;border-radius:12px;padding:16px;margin:12px 0}
.ok{color:#166534}.fail{color:#b91c1c}
small{color:#6b7280}
</style>
<h1>Teste de Hotlink (IMG)</h1>
<p>URL testada:</p>
<input id="u" style="width:100%;padding:8px" value="">
<button onclick="go()">Testar</button>
<div id="out"></div>
<script>
const q = new URL(location).searchParams;
const DEF = q.get('u') || '';
document.getElementById('u').value = DEF;

function mk(title, opts){
  const div = document.createElement('div'); div.className='card';
  const h = document.createElement('h3'); h.textContent = title; div.appendChild(h);
  const img = new Image(); img.loading='eager'; img.width=320; img.height=180;
  Object.entries(opts).forEach(([k,v])=>{ if (v!==null) img.setAttribute(k, v); });
  img.src = DEF;
  const p = document.createElement('p'); p.innerHTML = '<small>'+JSON.stringify(opts)+'</small>';
  const r = document.createElement('div'); r.textContent='âŒ› carregando...';
  img.onload =()=>{ r.innerHTML = '<b class="ok">OK</b> (onload)'; };
  img.onerror=()=>{ r.innerHTML = '<b class="fail">FALHOU</b> (onerror)'; };
  div.appendChild(r); div.appendChild(p); div.appendChild(img);
  return div;
}

function go(){
  const out = document.getElementById('out'); out.innerHTML='';
  const url = document.getElementById('u').value;
  if(!url){ out.textContent='Informe ?u=URL'; return; }
  window.history.replaceState({}, '', '?u='+encodeURIComponent(url));
  out.appendChild(mk('IMG normal', {}));
  out.appendChild(mk('IMG no-referrer', {referrerpolicy:'no-referrer'}));
  out.appendChild(mk('IMG anonymous + no-referrer', {crossorigin:'anonymous', referrerpolicy:'no-referrer'}));
}
go();
</script>